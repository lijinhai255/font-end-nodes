(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{1400:function(t,a,s){"use strict";s.r(a);var n=s(24),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端面试小册子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端面试小册子"}},[t._v("#")]),t._v(" 前端面试小册子")]),t._v(" "),a("h2",{attrs:{id:"react15-161718都有愿些新变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react15-161718都有愿些新变化"}},[t._v("#")]),t._v(" React15/161718都有愿些新变化？")]),t._v(" "),a("h3",{attrs:{id:"react-版本对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-版本对比"}},[t._v("#")]),t._v(" React 版本对比")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("React 版本")]),t._v(" "),a("th",[t._v("核心架构变化")]),t._v(" "),a("th",[t._v("新增/改进特性")]),t._v(" "),a("th",[t._v("对开发者影响")]),t._v(" "),a("th",[t._v("事件处理机制")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("React 15")]),t._v(" "),a("td",[t._v("传统 Stack 协调算法")]),t._v(" "),a("td",[t._v("功能较稳定，无重大变革")]),t._v(" "),a("td",[t._v("构建 UI 需要更冗余，不够灵活")]),t._v(" "),a("td",[t._v("事件委托在 document 上")])]),t._v(" "),a("tr",[a("td",[t._v("React 16")]),t._v(" "),a("td",[t._v("Fiber 架构引入")]),t._v(" "),a("td",[t._v("异步可中断渲染架构打底，新增 Error Boundaries（隔离错误）、Portals（跨 DOM 挂载）、可返回数组/字符串/Fragments")]),t._v(" "),a("td",[t._v("编写组件更灵活，错误处理更优雅，SSR 性能提升")]),t._v(" "),a("td",[t._v("事件仍委托在 document，机制未大改")])]),t._v(" "),a("tr",[a("td",[t._v("React 17")]),t._v(" "),a("td",[t._v("过渡性版本，无显著新功能")]),t._v(" "),a("td",[t._v("无重大新增功能，以活跃和稳定为主")]),t._v(" "),a("td",[t._v("减少升级阻力，更易多版本共存")]),t._v(" "),a("td",[t._v("事件委托从 document 转移至 React 容器根节点，为多根实例及未来特性做准备")])]),t._v(" "),a("tr",[a("td",[t._v("React 18")]),t._v(" "),a("td",[t._v("并发特性（Concurrent Rendering），Suspense 完善、自动批处理，Transitions（useTransition）")]),t._v(" "),a("td",[t._v("新增 createRoot API（并发渲染）、Suspense 在数据加载中更实用、自动批处理状态更新、useTransition 标记非紧急更新")]),t._v(" "),a("td",[t._v("更流畅的用户体验、更高效的数据加载和渲染流程，严格模式下更易发现逻辑问题")]),t._v(" "),a("td",[t._v("与 17 类似的事件机制，支持多根和并发场景")])]),t._v(" "),a("tr",[a("td",[t._v("React 19")]),t._v(" "),a("td",[t._v("增强并发模式，优化性能")]),t._v(" "),a("td",[t._v("支持 Streaming SSR 的改进、全新的 "),a("code",[t._v("useCache")]),t._v(" API 用于数据缓存管理、改进的 Suspense 支持更多场景")]),t._v(" "),a("td",[t._v("提高大规模应用的性能和开发效率，进一步简化数据加载和缓存逻辑")]),t._v(" "),a("td",[t._v("事件机制与 18 类似，继续优化并发事件处理")])])])]),t._v(" "),a("h3",{attrs:{id:"top-level-await"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#top-level-await"}},[t._v("#")]),t._v(" top-level await")]),t._v(" "),a("ul",[a("li",[t._v("top-level await 是 JavaScript 中的一个特性，允许在模块的顶层直接使用 await，而无需将其包裹在异步函数中。")]),t._v(" "),a("li",[t._v("在 React 中，引入了 top-level await 的支持后，可以让开发者在组件的定义阶段处理异步逻辑（如数据预取或动态导入），而无需额外的封装。")])]),t._v(" "),a("h3",{attrs:{id:"react-中的-use-使用指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-中的-use-使用指南"}},[t._v("#")]),t._v(" React 中的 "),a("code",[t._v("use")]),t._v(" 使用指南")]),t._v(" "),a("h4",{attrs:{id:"什么是-use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-use"}},[t._v("#")]),t._v(" 什么是 "),a("code",[t._v("use")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("use")]),t._v(" 是 React 引入的新特性，用于简化异步数据加载逻辑。")]),t._v(" "),a("li",[t._v("它允许直接在组件中等待（"),a("code",[t._v("await")]),t._v("）异步操作。")]),t._v(" "),a("li",[t._v("需要配合 "),a("code",[t._v("Suspense")]),t._v(" 使用，否则会报错。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"基础用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础用法"}},[t._v("#")]),t._v(" "),a("strong",[t._v("基础用法")])]),t._v(" "),a("p",[a("code",[t._v("use")]),t._v(" 会挂起（suspend）组件的渲染，直到异步函数完成。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"react-19-中的-formstate-和-formaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-19-中的-formstate-和-formaction"}},[t._v("#")]),t._v(" React 19 中的 "),a("code",[t._v("formState")]),t._v(" 和 "),a("code",[t._v("formAction")])]),t._v(" "),a("h3",{attrs:{id:"它们是否是-react-19-的新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#它们是否是-react-19-的新特性"}},[t._v("#")]),t._v(" "),a("strong",[t._v("它们是否是 React 19 的新特性？")])]),t._v(" "),a("p",[a("code",[t._v("formState")]),t._v(" 和 "),a("code",[t._v("formAction")]),t._v(" 并不是 React 19 新增的核心特性，而是现代 Web 开发（包括 React 生态）中的常见概念。在 React 19 的框架支持下，这些功能可以更加高效地集成和使用。")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("formState")])]),t._v("：常见于表单状态管理库，如 "),a("code",[t._v("react-hook-form")]),t._v(" 或 "),a("code",[t._v("Formik")]),t._v("，用于跟踪表单的状态和验证。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("formAction")])]),t._v("：是 HTML 的标准属性，用于定义表单提交的目标路径，但在现代框架中（如 React 和 Next.js），可以动态使用。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"formstate-的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#formstate-的作用"}},[t._v("#")]),t._v(" "),a("strong",[a("code",[t._v("formState")]),t._v(" 的作用")])]),t._v(" "),a("h4",{attrs:{id:"定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[t._v("#")]),t._v(" "),a("strong",[t._v("定义")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("formState")]),t._v(" 是表单的状态管理工具，用于实时跟踪表单的输入值、验证状态、提交状态等。")]),t._v(" "),a("li",[t._v("虽然 React 本身没有内置 "),a("code",[t._v("formState")]),t._v("，但通过库（如 "),a("code",[t._v("react-hook-form")]),t._v("）可以轻松实现。")])]),t._v(" "),a("h4",{attrs:{id:"常见属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见属性"}},[t._v("#")]),t._v(" "),a("strong",[t._v("常见属性")])]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("errors")])]),t._v("：字段的验证错误信息。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("isSubmitting")])]),t._v("：表单是否正在提交。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("isValid")])]),t._v("：表单验证是否通过。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("dirtyFields")])]),t._v("：用户已修改的字段。")])]),t._v(" "),a("h4",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" "),a("strong",[t._v("示例")])]),t._v(" "),a("p",[t._v("以下是使用 "),a("code",[t._v("react-hook-form")]),t._v(" 的例子：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useForm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hook-form'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleSubmit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" formState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useForm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onSubmit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("form onSubmit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleSubmit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onSubmit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("required")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Username is required'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("formState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("formState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"submit"')]),t._v(" disabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("formState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isSubmitting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        Submit\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("form"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"usetransition是提解决了什么-解决了什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usetransition是提解决了什么-解决了什么"}},[t._v("#")]),t._v(" useTransition是提解决了什么？ 解决了什么？")]),t._v(" "),a("p",[t._v("useTransition 的出现是为了解决在复杂更新场景下的界面卡顿问题，让用户在高优先级操作（如输入）期间仍能得到流畅即时的反馈，而较为昂贵的状态更新（如数据加载、列表过滤）则在后台以较低优先级完成。")]),t._v(" "),a("h1",{attrs:{id:"react-hook-usetransition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hook-usetransition"}},[t._v("#")]),t._v(" React Hook: "),a("code",[t._v("useTransition")])]),t._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" "),a("strong",[t._v("简介")])]),t._v(" "),a("p",[a("code",[t._v("useTransition")]),t._v(" 是 React 18 中引入的一个 Hook，主要用于管理非紧急更新的优先级。它允许开发者将某些状态更新标记为非紧急任务，从而避免阻塞用户交互操作（如输入框或按钮的即时响应）。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" "),a("strong",[t._v("作用")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("分离高优先级和低优先级的状态更新")]),t._v("：用户输入（高优先级）与相关的列表过滤（低优先级）可以独立处理。")]),t._v(" "),a("li",[a("strong",[t._v("避免界面卡顿")]),t._v("：当数据处理较多时，通过标记非紧急任务，保持界面的高响应性。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" "),a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[a("code",[t._v("isPending")])]),t._v("：一个布尔值，表示低优先级的任务是否仍在进行中。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("startTransition")])]),t._v("：一个函数，用于包装非紧急更新。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"用法示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法示例"}},[t._v("#")]),t._v(" "),a("strong",[t._v("用法示例")])]),t._v(" "),a("h3",{attrs:{id:"_1-基本示例-处理输入和过滤列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本示例-处理输入和过滤列表"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. 基本示例：处理输入和过滤列表")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useTransition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setResults"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将过滤逻辑标记为非紧急任务")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filteredResults "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Item ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setResults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filteredResults"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input\n        type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v("\n        value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        placeholder"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Search items"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isPending "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Loading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_2-优化繁重任务的用户体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-优化繁重任务的用户体验"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. 优化繁重任务的用户体验")])]),t._v(" "),a("p",[t._v("当存在耗时的状态更新（如大型表格渲染或复杂数据计算）时，可以通过 "),a("code",[t._v("useTransition")]),t._v(" 标记更新为非紧急。")]),t._v(" "),a("h4",{attrs:{id:"示例-数据模拟延迟加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-数据模拟延迟加载"}},[t._v("#")]),t._v(" 示例：数据模拟延迟加载")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useTransition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ExpensiveComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prev "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟一个耗时任务")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" generatedData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Item ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generatedData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Generate Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isPending "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Loading data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Data loaded"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" ExpensiveComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-动态渲染分页列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-动态渲染分页列表"}},[t._v("#")]),t._v(" "),a("strong",[t._v("3. 动态渲染分页列表")])]),t._v(" "),a("h4",{attrs:{id:"示例-分页切换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-分页切换"}},[t._v("#")]),t._v(" 示例：分页切换")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useTransition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PaginatedList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("page"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("items"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setItems"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handlePageChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newPage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟数据加载")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newItems "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Item ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newPage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItems")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newItems"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handlePageChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" disabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          Previous\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handlePageChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("page "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Next"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isPending "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Loading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" PaginatedList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" "),a("strong",[t._v("注意事项")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("非紧急更新的限制")]),t._v("："),a("code",[t._v("useTransition")]),t._v(" 仅适用于标记非紧急任务，不能用于高优先级任务。")]),t._v(" "),a("li",[a("strong",[t._v("性能优化")]),t._v("：它不会减少计算时间，只是将其推迟到更适合的时间运行。")]),t._v(" "),a("li",[a("strong",[t._v("并发模式")]),t._v("："),a("code",[t._v("useTransition")]),t._v(" 需要 React 的并发渲染支持，在 React 18 中默认启用。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("useTransition")]),t._v(" 是 React 18 的强大工具，用于优化用户体验。")]),t._v(" "),a("li",[t._v("它帮助开发者区分高优先级任务（如用户输入）和低优先级任务（如复杂计算或数据更新）。")]),t._v(" "),a("li",[t._v("配合 React 的 Concurrent Rendering，可以显著提升界面交互的流畅性。")])]),t._v(" "),a("p",[t._v("适用于需要处理大规模数据或高频交互的应用场景，例如搜索、分页、或动态表格更新。")]),t._v(" "),a("h1",{attrs:{id:"react-hooks-usetransition-和-usedeferredvalue-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks-usetransition-和-usedeferredvalue-的区别"}},[t._v("#")]),t._v(" React Hooks: "),a("code",[t._v("useTransition")]),t._v(" 和 "),a("code",[t._v("useDeferredValue")]),t._v(" 的区别")]),t._v(" "),a("h2",{attrs:{id:"简介-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("简介")])]),t._v(" "),a("p",[a("code",[t._v("useTransition")]),t._v(" 和 "),a("code",[t._v("useDeferredValue")]),t._v(" 都是 React 18 中引入的用于优化用户体验的 Hook，但它们的用途和功能有所不同。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_1-usetransition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-usetransition"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. "),a("code",[t._v("useTransition")])])]),t._v(" "),a("h3",{attrs:{id:"核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[t._v("#")]),t._v(" "),a("strong",[t._v("核心概念")])]),t._v(" "),a("ul",[a("li",[t._v("用于管理"),a("strong",[t._v("非紧急更新")]),t._v("，通过延迟低优先级任务的执行，优先处理高优先级任务（如用户输入）。")]),t._v(" "),a("li",[t._v("适合在需要分离高优先级和低优先级任务的场景中使用。")])]),t._v(" "),a("h3",{attrs:{id:"语法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[a("code",[t._v("isPending")])]),t._v(": 一个布尔值，表示低优先级任务是否正在进行。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("startTransition")])]),t._v(": 一个函数，用于包装非紧急任务。")])]),t._v(" "),a("h3",{attrs:{id:"使用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" "),a("strong",[t._v("使用场景")])]),t._v(" "),a("ul",[a("li",[t._v("高优先级任务（如用户输入）与低优先级任务（如复杂计算或数据更新）的分离。")]),t._v(" "),a("li",[t._v("确保用户交互的即时响应性，同时后台处理复杂的低优先级任务。")])]),t._v(" "),a("h3",{attrs:{id:"示例-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useTransition "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SearchComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setResults"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isPending"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTransition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startTransition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filteredResults "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Item ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setResults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filteredResults"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("handleChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isPending "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Loading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"_2-usedeferredvalue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-usedeferredvalue"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. "),a("code",[t._v("useDeferredValue")])])]),t._v(" "),a("h3",{attrs:{id:"核心概念-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心概念-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("核心概念")])]),t._v(" "),a("ul",[a("li",[t._v("用于将某个状态的值标记为"),a("strong",[t._v("延迟更新")]),t._v("，适合那些因计算复杂或渲染昂贵而导致性能问题的场景。")]),t._v(" "),a("li",[t._v("不直接控制状态的更新，而是返回一个延迟的值。")])]),t._v(" "),a("h3",{attrs:{id:"语法-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法-3"}},[t._v("#")]),t._v(" "),a("strong",[t._v("语法")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deferredValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDeferredValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[a("code",[t._v("deferredValue")])]),t._v(": 返回延迟更新的值，与原始值可能不同步，React 会在有空闲时间时更新它。")])]),t._v(" "),a("h3",{attrs:{id:"使用场景-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用场景-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("使用场景")])]),t._v(" "),a("ul",[a("li",[t._v("优化耗时任务的渲染（如大规模列表或复杂计算），使得当前页面的渲染更流畅。")]),t._v(" "),a("li",[t._v("延迟不重要的状态变化，确保用户界面及时响应。")])]),t._v(" "),a("h3",{attrs:{id:"示例-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例-3"}},[t._v("#")]),t._v(" "),a("strong",[t._v("示例")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useDeferredValue "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("DeferredSearch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deferredQuery "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDeferredValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" results "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Item ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deferredQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input\n        type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v("\n        value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        placeholder"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Search items"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"对比总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比总结"}},[t._v("#")]),t._v(" "),a("strong",[t._v("对比总结")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("特性")]),t._v(" "),a("th",[a("code",[t._v("useTransition")])]),t._v(" "),a("th",[a("code",[t._v("useDeferredValue")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("用途")])]),t._v(" "),a("td",[t._v("控制非紧急任务的执行（如低优先级状态更新）。")]),t._v(" "),a("td",[t._v("延迟传递的值，避免复杂状态变化阻塞界面渲染。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("优先级控制")])]),t._v(" "),a("td",[t._v("高优先级任务立即执行，低优先级任务延迟执行。")]),t._v(" "),a("td",[t._v("自动延迟值的同步更新，渲染更流畅。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("触发方式")])]),t._v(" "),a("td",[t._v("使用 "),a("code",[t._v("startTransition")]),t._v(" 包裹非紧急任务。")]),t._v(" "),a("td",[t._v("直接延迟传递状态值，React 内部控制。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("适用场景")])]),t._v(" "),a("td",[t._v("高频用户交互（如输入框）与复杂任务（如过滤列表）分离。")]),t._v(" "),a("td",[t._v("优化昂贵的状态计算（如大列表渲染、复杂筛选逻辑）。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("返回值")])]),t._v(" "),a("td",[t._v("布尔值 "),a("code",[t._v("isPending")]),t._v(" 和任务触发器 "),a("code",[t._v("startTransition")]),t._v("。")]),t._v(" "),a("td",[t._v("延迟更新的值 "),a("code",[t._v("deferredValue")]),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("依赖 React 并发模式")])]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("是")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"使用建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用建议"}},[t._v("#")]),t._v(" "),a("strong",[t._v("使用建议")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("使用 "),a("code",[t._v("useTransition")]),t._v("：")])]),t._v(" "),a("ul",[a("li",[t._v("需要手动控制优先级更新时（如用户输入和后台数据处理分离）。")]),t._v(" "),a("li",[t._v("对复杂状态的更新进行分类，高优先级任务应及时响应。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("使用 "),a("code",[t._v("useDeferredValue")]),t._v("：")])]),t._v(" "),a("ul",[a("li",[t._v("当只需要延迟某个状态的传递，而不需要明确的优先级控制时。")]),t._v(" "),a("li",[t._v("优化复杂状态的传递逻辑，保持用户界面的响应性。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"总结-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[a("code",[t._v("useTransition")]),t._v(" 和 "),a("code",[t._v("useDeferredValue")]),t._v(" 都是 React 提供的性能优化工具，它们适用于不同的场景：")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("useTransition")])]),t._v("：用于手动管理任务优先级，适合处理复杂的异步更新场景。")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("useDeferredValue")])]),t._v("：用于延迟状态值的传递，适合单一状态优化的场景。")])]),t._v(" "),a("p",[t._v("根据项目需求选择合适的工具，以提升用户体验和界面性能。")]),t._v(" "),a("h2",{attrs:{id:"react整体渲染流程请描述下-。那你能说下双缓存是在哪个阶段设置的么-优缺点是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react整体渲染流程请描述下-。那你能说下双缓存是在哪个阶段设置的么-优缺点是什么"}},[t._v("#")]),t._v(" React整体渲染流程请描述下？ 。那你能说下双缓存是在哪个阶段设置的么？优缺点是什么？")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("阶段")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("初始化阶段 (Initialization)")])]),t._v(" "),a("td",[t._v("创建 Fiber 节点，代表整个 React 应用的根组件；调用根组件的 "),a("code",[t._v("render")]),t._v(" 方法，创建初始的虚拟 DOM 树。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("调度阶段 (Scheduler)")])]),t._v(" "),a("td",[t._v("使用调度器（Scheduler）调度更新任务，决定何时执行更新任务。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- 检查是否有更高优先级的任务（如用户交互）。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- 将高优先级任务分配到不同的任务队列中（lane）。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("协调阶段 (Reconciliation)")])]),t._v(" "),a("td",[t._v("从任务队列中取出任务，比较前后两个虚拟 DOM 树的差异，找到需要更新的部分；使用 DOM Diff 算法计算差异，并生成相应的更新指令。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("生命周期阶段 (Lifecycle)")])]),t._v(" "),a("td",[t._v("根据组件的生命周期方法（如 "),a("code",[t._v("componentDidMount")]),t._v("、"),a("code",[t._v("componentDidUpdate")]),t._v("）调用对应的钩子函数，处理组件生命周期事件。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("渲染阶段 (Render)")])]),t._v(" "),a("td",[t._v("React 根据组件状态变化或 props 变化，触发组件更新：")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- 函数组件：重新执行函数体。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- 类组件：调用 "),a("code",[t._v("render")]),t._v(" 方法。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("如果组件中使用了 Hooks，则按 Hooks 的调用顺序依次执行（如 "),a("code",[t._v("useState")]),t._v("、"),a("code",[t._v("useEffect")]),t._v("、"),a("code",[t._v("useContext")]),t._v("）。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Hooks 执行")])]),t._v(" "),a("td",[t._v("在渲染阶段，React 会按照 Hooks 的顺序执行。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- 执行 "),a("code",[t._v("useState")]),t._v("、"),a("code",[t._v("useEffect")]),t._v("、"),a("code",[t._v("useContext")]),t._v(" 等 Hooks。")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("- React 18 支持自动化批处理（如多个 "),a("code",[t._v("setState")]),t._v(" 合并到一次更新）。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("提交阶段 (Commit)")])]),t._v(" "),a("td",[t._v("将渲染阶段生成的更新应用到真实 DOM 中，完成页面更新；执行可能存在的生命周期方法（如 "),a("code",[t._v("componentDidMount")]),t._v("、"),a("code",[t._v("componentDidUpdate")]),t._v("）或其他副作用。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("重复步骤 2-7")])]),t._v(" "),a("td",[t._v("根据交互和状态变化，React 会不断重复调度、协调、渲染和提交的过程，循环执行以实现页面的持续更新。")])])])]),t._v(" "),a("h2",{attrs:{id:"fiber架构原理你能细致描达下么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber架构原理你能细致描达下么"}},[t._v("#")]),t._v(" Fiber架构原理你能细致描达下么？")]),t._v(" "),a("h2",{attrs:{id:"react-fiber-核心概念和原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-fiber-核心概念和原理"}},[t._v("#")]),t._v(" React Fiber 核心概念和原理")]),t._v(" "),a("h2",{attrs:{id:"fiber-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber-是什么"}},[t._v("#")]),t._v(" Fiber 是什么？")]),t._v(" "),a("ul",[a("li",[t._v("Fiber 是 React 16 中引入的一种新的调和（Reconciliation）引擎。在这个架构下，React 能够有效调度和分配优先级，使 React 可以在执行过程中暂停、中断和恢复工作，从而实现时间切片（Time Slicing）和并发模式（Concurrent Mode）等特性。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"fiber-核心原理的几个关键概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber-核心原理的几个关键概念"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Fiber 核心原理的几个关键概念")])]),t._v(" "),a("h3",{attrs:{id:"_1-fiber-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-fiber-node"}},[t._v("#")]),t._v(" 1. "),a("strong",[t._v("Fiber Node")])]),t._v(" "),a("ul",[a("li",[t._v("每个 React 组件都有一个对应的 Fiber 节点。")]),t._v(" "),a("li",[t._v("Fiber 节点用于保存组件的状态、组件类型及其他信息。")]),t._v(" "),a("li",[t._v("每个 Fiber 节点都指向一个父节点、子节点和兄弟节点，组成一个 Fiber 树。")])]),t._v(" "),a("h3",{attrs:{id:"_2-双缓冲技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-双缓冲技术"}},[t._v("#")]),t._v(" 2. "),a("strong",[t._v("双缓冲技术")])]),t._v(" "),a("ul",[a("li",[t._v("Fiber 架构采用了双缓冲技术，即两棵 Fiber 树：\n"),a("ul",[a("li",[a("strong",[t._v("当前显示的 Fiber 树（Current Fiber Tree）")])]),t._v(" "),a("li",[a("strong",[t._v("即将更新的 Fiber 树（Work-in-Progress Fiber Tree）")])])])]),t._v(" "),a("li",[t._v("这种方式可以避免在直接操作 DOM 的同时出现错误，提高了性能，并能支持错误边界和回溯到稳定状态。")])]),t._v(" "),a("h3",{attrs:{id:"_3-工作单元"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-工作单元"}},[t._v("#")]),t._v(" 3. "),a("strong",[t._v("工作单元")])]),t._v(" "),a("ul",[a("li",[t._v("React 的渲染过程可以看作是一系列的工作单元。")]),t._v(" "),a("li",[t._v("每次循环中，React 会选取一个 Fiber 节点，为每个节点调用对应的生命周期方法，生成对应的 DOM 更新。")]),t._v(" "),a("li",[t._v("如果在渲染过程中被打断，React 可以从中断点恢复工作。")])]),t._v(" "),a("h3",{attrs:{id:"_4-中断和恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-中断和恢复"}},[t._v("#")]),t._v(" 4. "),a("strong",[t._v("中断和恢复")])]),t._v(" "),a("ul",[a("li",[t._v("Fiber 通过优先级机制允许中断和恢复工作：\n"),a("ul",[a("li",[t._v("React 将工作拆分为小任务，每个任务的执行时间不超过一个间隔，从而实现时间切片（Time Slicing）。")]),t._v(" "),a("li",[t._v("React 可以在任务执行中暂停，出让控制权，优先处理高优先级的工作，例如用户交互。")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-优先级和并发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-优先级和并发"}},[t._v("#")]),t._v(" 5. "),a("strong",[t._v("优先级和并发")])]),t._v(" "),a("ul",[a("li",[t._v("不同的任务可以被赋予不同的优先级：\n"),a("ul",[a("li",[t._v("用户交互会被赋予最高优先级。")]),t._v(" "),a("li",[t._v("后台数据更新等次要任务会被延后执行。")])])]),t._v(" "),a("li",[t._v("这种机制允许 React 在低优先级任务中暂停，及时响应高优先级任务。")])]),t._v(" "),a("h3",{attrs:{id:"_6-错误边界"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-错误边界"}},[t._v("#")]),t._v(" 6. "),a("strong",[t._v("错误边界")])]),t._v(" "),a("ul",[a("li",[t._v("如果在更新过程中发生错误，React 会通过错误边界捕获异常，避免整个组件树崩溃。")]),t._v(" "),a("li",[t._v("错误边界可以将错误隔离到特定组件，同时提供备用 UI。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"总结-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-3"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[t._v("Fiber 是 React 的一项重要技术改进。它带来了许多新特性，如更细粒度的任务拆分、更高效的错误捕获机制以及时间切片的实现，使 React 在处理用户界面时更高效、更流畅。")]),t._v(" "),a("h2",{attrs:{id:"react-scheduler核心原理react15-16-17-18变化都有哪些-batching在这个阶段里么-解决了什么原理是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-scheduler核心原理react15-16-17-18变化都有哪些-batching在这个阶段里么-解决了什么原理是什么"}},[t._v("#")]),t._v(" React Scheduler核心原理React15/16/17/18变化都有哪些？Batching在这个阶段里么，解决了什么原理是什么？")]),t._v(" "),a("h1",{attrs:{id:"react-scheduler-与-batching-特性说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-scheduler-与-batching-特性说明"}},[t._v("#")]),t._v(" React Scheduler 与 Batching 特性说明")]),t._v(" "),a("h2",{attrs:{id:"react-scheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-scheduler"}},[t._v("#")]),t._v(" React Scheduler")]),t._v(" "),a("p",[t._v("React Scheduler 是一个 React 内部的任务调度器。它主要用于在执行长期任务的空闲时间内有机会处理其他的任务，比如用户输入和动画，以提高应用的响应速度。这也是 React 中时间切片（Time Slicing）的核心实现。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("React 16：")]),t._v(" Scheduler 作为一个实验性功能被引入，用于实现新的 Fiber 架构和时间切片。")]),t._v(" "),a("li",[a("strong",[t._v("React 17：")]),t._v(" Scheduler 并没有明显变化，主要在于更改事件系统，使得 React 与原生 JavaScript 的兼容性更好。")]),t._v(" "),a("li",[a("strong",[t._v("React 18：")]),t._v(" Scheduler 将提供更完善的利用，以支持并发模式（Concurrent Mode）和新的 Suspense 特性。")])]),t._v(" "),a("h2",{attrs:{id:"batching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#batching"}},[t._v("#")]),t._v(" Batching")]),t._v(" "),a("p",[a("strong",[t._v("Batching")]),t._v(" 是 React 的一个重要特性，它允许 React 将多个状态更新合并为一次渲染，从而减少不必要的渲染次数和 DOM 更新，提高性能。在 React 的历史版本中，Batching 主要在 React 的事件处理函数和生命周期方法中生效；在异步代码等环境中，Batching 不会发生，每个状态更新都会导致一次渲染。")]),t._v(" "),a("h3",{attrs:{id:"automatic-batching-react-18-新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#automatic-batching-react-18-新特性"}},[t._v("#")]),t._v(" Automatic Batching（React 18 新特性）")]),t._v(" "),a("p",[t._v("在 React 18 中，引入了新的特性 "),a("strong",[t._v("automatic batching")]),t._v("。当代码里出现多个状态更新时，它们会被自动合并为一次渲染，不再局限于事件处理或生命周期内。这大大简化了开发者的心智负担，不必手动考虑多次状态更新是否需要手动 batch。")]),t._v(" "),a("p",[t._v("下面是一个示例：在异步函数（如 "),a("code",[t._v("setTimeout")]),t._v("）中执行两个状态更新，也会合并为一次渲染：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h1",{attrs:{id:"react-18-的-automatic-batching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-18-的-automatic-batching"}},[t._v("#")]),t._v(" React 18 的 Automatic Batching")]),t._v(" "),a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" "),a("strong",[t._v("背景")])]),t._v(" "),a("p",[a("code",[t._v("batching")]),t._v(" 是 React 的一种优化机制，用于减少不必要的渲染和 DOM 更新，从而提高应用性能。"),a("br"),t._v("\n传统的 batching 在 React 中已经存在，但其作用范围有限，React 18 引入了更强大的 "),a("strong",[t._v("Automatic Batching")]),t._v("。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"传统的-batching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传统的-batching"}},[t._v("#")]),t._v(" "),a("strong",[t._v("传统的 Batching")])]),t._v(" "),a("h3",{attrs:{id:"特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" "),a("strong",[t._v("特点")])]),t._v(" "),a("ul",[a("li",[t._v("在 React 的历史版本中，只有在 React 内部的生命周期方法中，多个状态更新才会自动合并为一次渲染。")]),t._v(" "),a("li",[t._v("在异步代码中，例如 "),a("code",[t._v("setTimeout")]),t._v(" 或 "),a("code",[t._v("Promise")]),t._v("，React 并不会对状态更新进行 batching，每次状态更新都会触发一次渲染。")])]),t._v(" "),a("h3",{attrs:{id:"示例代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例代码"}},[t._v("#")]),t._v(" "),a("strong",[t._v("示例代码")])]),t._v(" "),a("h4",{attrs:{id:"传统生命周期中的-batching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传统生命周期中的-batching"}},[t._v("#")]),t._v(" 传统生命周期中的 batching")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("代码执行一次")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("p",[t._v("会触发两次")]),t._v(" "),a("h4",{attrs:{id:"react-18-的-automatic-batching-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-18-的-automatic-batching-2"}},[t._v("#")]),t._v(" React 18 的 Automatic Batching")]),t._v(" "),a("ul",[a("li",[t._v("引入了全新的 Automatic Batching 机制。")]),t._v(" "),a("li",[t._v("只要是连续的状态更新，无论它们发生在同步还是异步代码中，都可以自动合并为一次渲染。")]),t._v(" "),a("li",[t._v("提高了性能，开发者无需担心状态更新是否在一个 batch 中。")])]),t._v(" "),a("p",[t._v("React 18 中的异步状态更新")]),t._v(" "),a("div",{staticClass:"language-javaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"hooks为什么不能写在条件判断、函数体里。我现在有业务场景就需要在里写怎么办呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks为什么不能写在条件判断、函数体里。我现在有业务场景就需要在里写怎么办呢"}},[t._v("#")]),t._v(" Hooks为什么不能写在条件判断、函数体里。我现在有业务场景就需要在里写怎么办呢？")]),t._v(" "),a("h3",{attrs:{id:"hooks-为什么不能写在条件判断中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-为什么不能写在条件判断中"}},[t._v("#")]),t._v(" Hooks 为什么不能写在条件判断中？")]),t._v(" "),a("p",[t._v("React 通过单向链表保存 Hooks 状态，必须按固定顺序依次调用每个 Hook，否则会导致状态和副作用错位。")]),t._v(" "),a("h3",{attrs:{id:"如果需要条件判断怎么办"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如果需要条件判断怎么办"}},[t._v("#")]),t._v(" 如果需要条件判断怎么办？")]),t._v(" "),a("ul",[a("li",[t._v("将逻辑提取到 Hooks 内部，或者使用外部状态管理工具（如 zustand）来实现条件分支。")])]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    react-use\n    react-hookable\n")])])]),a("h3",{attrs:{id:"state直接在函数组件调用会造成无限渲染-原因是什么-怎么监控react无意义渲染-监控的原理是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state直接在函数组件调用会造成无限渲染-原因是什么-怎么监控react无意义渲染-监控的原理是什么"}},[t._v("#")]),t._v(" state直接在函数组件调用会造成无限渲染，原因是什么，怎么监控React无意义渲染，监控的原理是什么？")]),t._v(" "),a("p",[t._v("如果在函数组件的主函数体中调用 setState，状态更新会触发渲染，渲染又触发状态更新，形成无限循环。")]),t._v(" "),a("p",[t._v("将状态更新逻辑放入 useEffect 等副作用中，避免在函数体直接调用 setState。")]),t._v(" "),a("p",[t._v("使用 why-did-you-render 监控无意义渲染，检测 props 和 state 是否发生实际变化。")]),t._v(" "),a("p",[t._v("基于 React.memo 的浅比较机制，判断前后 props 和 state 的变化。如果没有变化却发生渲染，会在控制台打印警告。")]),t._v(" "),a("h2",{attrs:{id:"welldone-software-why-did-you-render"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#welldone-software-why-did-you-render"}},[t._v("#")]),t._v(" @welldone-software/why-did-you-render")]),t._v(" "),a("h3",{attrs:{id:"简介-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-3"}},[t._v("#")]),t._v(" "),a("strong",[t._v("简介")])]),t._v(" "),a("p",[a("code",[t._v("@welldone-software/why-did-you-render")]),t._v(" 是一个用于调试 React 中不必要重渲染的问题的工具。"),a("br"),t._v("\n它可以帮助开发者追踪并识别由 prop 或 state 的不必要变化而触发的重渲染，从而提高应用的性能。")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作原理"}},[t._v("#")]),t._v(" "),a("strong",[t._v("工作原理")])]),t._v(" "),a("ul",[a("li",[t._v("当你在应用中使用该库时，它会通过包装组件，重写它们的 "),a("code",[t._v("shouldComponentUpdate")]),t._v("（类组件）或 "),a("code",[t._v("React.memo")]),t._v("（函数组件）方法。"),a("br"),t._v("\n在这些方法中，它会比较前后两次渲染的 "),a("code",[t._v("props")]),t._v(" 和 "),a("code",[t._v("state")]),t._v(" 值。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"功能说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能说明"}},[t._v("#")]),t._v(" "),a("strong",[t._v("功能说明")])]),t._v(" "),a("ol",[a("li",[t._v("如果 "),a("code",[t._v("props")]),t._v(" 或 "),a("code",[t._v("state")]),t._v(" 的值在两次渲染之间没有发生真正的变化，但组件仍然被重新渲染了，"),a("br"),t._v("\n`@welldone-software/why-did-you")])]),t._v(" "),a("h2",{attrs:{id:"dom-diff细节请详细描述一下-vue使用了双指针-react为什么没采用呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom-diff细节请详细描述一下-vue使用了双指针-react为什么没采用呢"}},[t._v("#")]),t._v(" Dom Diff细节请详细描述一下？Vue使用了双指针，React为什么没采用呢？")]),t._v(" "),a("h1",{attrs:{id:"vue-与-react-在-diff-算法上的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-与-react-在-diff-算法上的对比"}},[t._v("#")]),t._v(" Vue 与 React 在 Diff 算法上的对比")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("对比维度")])]),t._v(" "),a("th",[a("strong",[t._v("Vue 的双指针 Diff")])]),t._v(" "),a("th",[a("strong",[t._v("React 的 Key-based Diff")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("算法基础")])]),t._v(" "),a("td",[t._v("双指针算法，从两端同时比较节点；Vue 3 最长递增子序列。")]),t._v(" "),a("td",[t._v("基于 "),a("code",[t._v("key")]),t._v(" 的唯一性标识，逐层比较组件树。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("适用场景")])]),t._v(" "),a("td",[t._v("更适合动态列表（如 "),a("code",[t._v("v-for")]),t._v(" 渲染）。")]),t._v(" "),a("td",[t._v("通用性更强，适合复杂组件树和跨层级更新。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("实现方式")])]),t._v(" "),a("td",[t._v("比较节点的实际位置，操作具体 DOM 节点。")]),t._v(" "),a("td",[t._v("比较组件的 "),a("code",[t._v("key")]),t._v(" 和类型，操作虚拟 DOM。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("性能复杂度")])]),t._v(" "),a("td",[a("code",[t._v("O(n)")]),t._v("，高效处理列表操作。")]),t._v(" "),a("td",[a("code",[t._v("O(n)")]),t._v("，通过 "),a("code",[t._v("key")]),t._v(" 跳过无关节点。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("灵活性")])]),t._v(" "),a("td",[t._v("模板驱动，更新逻辑明确。")]),t._v(" "),a("td",[t._v("灵活性更高，适配更多动态场景。")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("设计理念")])]),t._v(" "),a("td",[t._v("更关注视图更新和 DOM 操作。")]),t._v(" "),a("td",[t._v("更关注组件复用和状态管理。")])])])]),t._v(" "),a("h1",{attrs:{id:"react-fiber-架构介绍及双指针算法对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-fiber-架构介绍及双指针算法对比"}},[t._v("#")]),t._v(" React Fiber 架构介绍及双指针算法对比")]),t._v(" "),a("h2",{attrs:{id:"fiber-的引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber-的引入"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Fiber 的引入")])]),t._v(" "),a("p",[t._v("React 在其 16 版本中引入了 Fiber 架构，重新设计了调度和渲染机制。Fiber 架构并没有采用双指针算法，而是引入了一种基于链表的单链表遍历方式，重点在于任务的"),a("strong",[t._v("可中断和优先级调度")]),t._v("。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"fiber-的优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber-的优点"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Fiber 的优点")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("可中断的更新")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("Fiber 架构将渲染任务拆分为可以中断的更小单元，允许更高优先级的任务（如用户交互）插入执行，提升用户体验的流畅度。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("优先级调度")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("Fiber 支持不同优先级的任务，React 可以更智能地调度任务，确保高优先级任务得到及时响应。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("灵活性")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("Fiber 提供了更灵活的更新机制，使得复杂的更新任务可以分块处理。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"fiber-架构的核心实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber-架构的核心实现"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Fiber 架构的核心实现")])]),t._v(" "),a("p",[t._v("以下是一个 Fiber 节点的示例实现：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FiberNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pendingProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elementType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("child "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ref "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pendingProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pendingProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("updateQueue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h1",{attrs:{id:"react-fiber-架构设计目标与特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-fiber-架构设计目标与特性"}},[t._v("#")]),t._v(" React Fiber 架构设计目标与特性")]),t._v(" "),a("h2",{attrs:{id:"_1-设计目标不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设计目标不同"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. 设计目标不同")])]),t._v(" "),a("ul",[a("li",[t._v("React 的设计目标之一是实现任务的"),a("strong",[t._v("可中断和优先级调度")]),t._v("。")]),t._v(" "),a("li",[t._v("这需要复杂的调度机制和数据结构。")]),t._v(" "),a("li",[t._v("双指针算法虽然简单高效，但无法满足 React 对任务调度和中断的需求。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_2-灵活性要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-灵活性要求"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. 灵活性要求")])]),t._v(" "),a("ul",[a("li",[t._v("React 希望在组件树结构中具有更高的灵活性，尤其是在处理复杂更新时。")]),t._v(" "),a("li",[t._v("Fiber 架构允许 React 将复杂的更新任务分块处理，并在必要时中断和恢复。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-可扩展性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-可扩展性"}},[t._v("#")]),t._v(" "),a("strong",[t._v("3. 可扩展性")])]),t._v(" "),a("ul",[a("li",[t._v("Fiber 架构构建未来优化和功能扩展的基础。")]),t._v(" "),a("li",[t._v("使 React 可以更轻松地引入新的特性和优化。")])]),t._v(" "),a("h2",{attrs:{id:"react如何实现自身的事件系统-什么叫合成事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react如何实现自身的事件系统-什么叫合成事件"}},[t._v("#")]),t._v(" React如何实现自身的事件系统？什么叫合成事件？")]),t._v(" "),a("h1",{attrs:{id:"react-合成事件-syntheticevent-详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-合成事件-syntheticevent-详解"}},[t._v("#")]),t._v(" React 合成事件 (SyntheticEvent) 详解")]),t._v(" "),a("h2",{attrs:{id:"简介-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-4"}},[t._v("#")]),t._v(" "),a("strong",[t._v("简介")])]),t._v(" "),a("p",[t._v("React 合成事件 ("),a("code",[t._v("SyntheticEvent")]),t._v(") 是 React 框架自己实现的一套事件系统。"),a("br"),t._v("\n它在系统模拟了原生的 DOM 事件，同时提供了一些额外的优点。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"react-合成事件的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-合成事件的特点"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 合成事件的特点")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("跨浏览器兼容性")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("不同浏览器的原生事件行为可能存在差异。")]),t._v(" "),a("li",[t._v("React 的合成事件为所有浏览器提供了一致的 API 和行为，从而消除了这种差异。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("性能优化")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("React 使用了事件委托（Event Delegation）机制。")]),t._v(" "),a("li",[t._v("所有事件都绑定到统一的顶层 DOM 节点，而不是直接绑定到组件的 DOM 节点。")]),t._v(" "),a("li",[t._v("当事件发生时，React 会根据内部机制定位真正的事件处理器，这可以有效减少事件监听的数量，节省内存并提升性能。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("集成到 React 的状态系统")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("React 的合成事件与 React 的状态更新机制深度集成。")]),t._v(" "),a("li",[t._v("比如在事件回调中调用 "),a("code",[t._v("setState")]),t._v("，React 会正确地批处理更新和重新渲染。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("提供更多的信息")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("React 的合成事件提供了比原生事件更多的信息，例如 "),a("code",[t._v("event.target")]),t._v("。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"与原生-dom-事件的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与原生-dom-事件的对比"}},[t._v("#")]),t._v(" "),a("strong",[t._v("与原生 DOM 事件的对比")])]),t._v(" "),a("ul",[a("li",[t._v("React 合成事件的名称（如 "),a("code",[t._v("onClick")]),t._v("、"),a("code",[t._v("onChange")]),t._v("）和它们在组件中的使用方式，与 JavaScript 中使用 DOM 事件的方式非常相似。")]),t._v(" "),a("li",[t._v("实际上，大多数情况下，你可以把它们当作标准的 DOM 事件来使用。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"特殊情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特殊情况"}},[t._v("#")]),t._v(" "),a("strong",[t._v("特殊情况")])]),t._v(" "),a("ul",[a("li",[t._v("在 React 组件中，对于大多数事件来说，React 会将它们绑定到顶层 DOM 节点。")]),t._v(" "),a("li",[t._v("相反，React 会直接在 "),a("code",[t._v("document")]),t._v(" 节点上为每种事件类型附加一个处理器。")]),t._v(" "),a("li",[t._v("除了在大型应用程序中处理性能问题外，这还通过 "),a("code",[t._v("Replaying Events")]),t._v(" 这样的特性提供了更多的功能。")])]),t._v(" "),a("p",[t._v("如果组件上有多个 React 版本，它们都会注册自己的事件处理器。这意味着即使调用 "),a("code",[t._v("stopPropagation()")]),t._v("，该组件树中的其他事件处理器仍然会接收到它。这会不同于原生 DOM 的事件传播模型。")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"react-17-的改进"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-17-的改进"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 17 的改进")])]),t._v(" "),a("ul",[a("li",[t._v("从 React 17 开始，React 不再将事件处理器附加到 "),a("code",[t._v("document")]),t._v(" 上，而是将事件处理器附加到 React 树的根 DOM 容器中。")])]),t._v(" "),a("p",[t._v("示例代码：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("ReactDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nReactDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Header "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"header"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nReactDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Footer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"footer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"react-concurrent-mode是什么-react18是怎么实现的-他和usetransition有联系么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-concurrent-mode是什么-react18是怎么实现的-他和usetransition有联系么"}},[t._v("#")]),t._v(" React Concurrent Mode是什么？React18是怎么实现的？他和useTransition有联系么？")]),t._v(" "),a("h2",{attrs:{id:"答案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("h3",{attrs:{id:"react-concurrent-mode-的定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-concurrent-mode-的定义"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React Concurrent Mode 的定义")])]),t._v(" "),a("ul",[a("li",[t._v("React 的 Concurrent Mode 是一种新的渲染模式。")]),t._v(" "),a("li",[t._v("它使 React 能够在多个状态更新中进行"),a("strong",[t._v("时间切片")]),t._v("，从而使得长时间运行的渲染任务不会阻塞浏览器的主线程。")]),t._v(" "),a("li",[t._v("这种模式可以提高应用的响应性，特别是在复杂应用中用户界面较复杂的情况下。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"传统同步渲染-vs-concurrent-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传统同步渲染-vs-concurrent-mode"}},[t._v("#")]),t._v(" "),a("strong",[t._v("传统同步渲染 vs Concurrent Mode")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在传统的同步渲染中：")]),t._v(" "),a("ul",[a("li",[t._v("React 会在一个状态更新发生时阻塞主线程，直到所有的组件都渲染完成。")]),t._v(" "),a("li",[t._v("在某些情况下，这可能会导致应用变得不够响应，因为主线程在渲染过程中无法处理其他任务，比如用户输入或动画。")])])]),t._v(" "),a("li",[a("p",[t._v("在 Concurrent Mode 中：")]),t._v(" "),a("ul",[a("li",[t._v("React 会将任务拆分为多个小任务。")]),t._v(" "),a("li",[t._v("每个任务的执行时间都很短，在这些任务之间，React 会给出一些空间的时间，让浏览器有机会处理其他的任务。")]),t._v(" "),a("li",[t._v("这就是所谓的"),a("strong",[t._v("时间切片（Time Slicing）")]),t._v("。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"usetransition-的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usetransition-的作用"}},[t._v("#")]),t._v(" "),a("strong",[t._v("useTransition 的作用")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("useTransition")]),t._v(" 是 React 18 中引入的一个 Hook。")]),t._v(" "),a("li",[t._v("它与 Concurrent Mode 紧密相关，"),a("code",[t._v("useTransition")]),t._v(" 使你可以告诉 React：\n"),a("ul",[a("li",[a("strong",[t._v("某些状态更新可能需要一些时间准备数据")]),t._v("（例如发起一个网络请求）。")]),t._v(" "),a("li",[a("strong",[t._v("可以延迟更新的 UI")]),t._v("，而不是立即渲染一个加载中的状态。")]),t._v(" "),a("li",[t._v("这样可以避免界面的抖动，提升用户体验。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"usetransition-在-concurrent-mode-中的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usetransition-在-concurrent-mode-中的使用"}},[t._v("#")]),t._v(" "),a("strong",[t._v("useTransition 在 Concurrent Mode 中的使用")])]),t._v(" "),a("ul",[a("li",[t._v("在 Concurrent Mode 中，"),a("code",[t._v("useTransition")]),t._v(" 可以让你为应用在等待的数据期间的加载动画提供平滑的过渡，同时改善整体平滑的过渡界面效果。")]),t._v(" "),a("li",[t._v("需要注意的是：\n"),a("ul",[a("li",[t._v("Concurrent Mode 和 "),a("code",[t._v("useTransition")]),t._v(" 都是 React 18 中的特性。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"总结-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-4"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[t._v("React Concurrent Mode 和 "),a("code",[t._v("useTransition")]),t._v(" 是 React 18 中的重要功能，它们相辅相成，共同提高了复杂应用的用户体验和渲染性能。")]),t._v(" "),a("h2",{attrs:{id:"将-vue-替换为-react-react-能提高-fps-吗-请给出理由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将-vue-替换为-react-react-能提高-fps-吗-请给出理由"}},[t._v("#")]),t._v(" 将 Vue 替换为 React，React 能提高 FPS 吗？请给出理由")]),t._v(" "),a("h3",{attrs:{id:"答案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-2"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("p",[t._v("将 Vue 替换为 React，或反之，并不一定会提高应用的帧率（FPS）。"),a("br"),t._v("\n实际的性能表现取决于许多因素，包括但不限于：")]),t._v(" "),a("ul",[a("li",[t._v("你如何使用这些框架。")]),t._v(" "),a("li",[t._v("你的应用的具体需求。")]),t._v(" "),a("li",[t._v("用户的设备性能。")])]),t._v(" "),a("p",[t._v("React 和 Vue 在设计上有一些关键的不同，这些不同可能会影响它们在特定场景下的性能：")]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"_1-虚拟-dom-实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-虚拟-dom-实现"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. 虚拟 DOM 实现")])]),t._v(" "),a("ul",[a("li",[t._v("React 和 Vue 都使用虚拟 DOM 来提升渲染性能，但它们的实现方式略有不同。")]),t._v(" "),a("li",[t._v("Vue 在某些情况下可以跳过依赖关系，更新改动的部分，而不是重新渲染整个组件树。")]),t._v(" "),a("li",[t._v("React 从 15+ 版本起引入了一些优化技巧，例如 "),a("code",[t._v("shouldComponentUpdate")]),t._v(" 和 "),a("code",[t._v("React.memo")]),t._v("，开发者可以用它们来避免不必要的渲染。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"_2-异步渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-异步渲染"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. 异步渲染")])]),t._v(" "),a("ul",[a("li",[t._v("React 的 Concurrent Mode 和 "),a("code",[t._v("useTransition")]),t._v(" Hook 支持异步渲染。")]),t._v(" "),a("li",[t._v("这可以让 React 在处理大量更新时保持界面的响应，特别是存在用户交互时。")]),t._v(" "),a("li",[t._v("Vue 在此部分没有类似的特性，但它在某些需求场景表现足够优化。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-框架的大小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-框架的大小"}},[t._v("#")]),t._v(" "),a("strong",[t._v("3. 框架的大小")])]),t._v(" "),a("ul",[a("li",[t._v("React 和 Vue 的框架大小相近，但 Vue 的模板编译器通常会稍微占用更多的时间。")]),t._v(" "),a("li",[t._v("React 的组件设计更灵活，优化代码路径清晰，而 Vue 的响应式特性可能增加额外的开销。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"总结-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-5"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("ul",[a("li",[t._v("从一个框架迁移到另一个框架需要大量工作，并且可能带来不必要的维护成本。")]),t._v(" "),a("li",[t._v("如果你使用 Vue 的现有组件，优化核心模块，或使用 Webpack 进行代码分割，通常可以达到类似的性能提升效果。")]),t._v(" "),a("li",[t._v("提高 FPS 关键在于优化你的代码和框架的使用，而非更换框架本身。")])]),t._v(" "),a("h2",{attrs:{id:"lane-是什么-解决了-react-什么问题-原理是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lane-是什么-解决了-react-什么问题-原理是什么"}},[t._v("#")]),t._v(" Lane 是什么？解决了 React 什么问题，原理是什么？")]),t._v(" "),a("h3",{attrs:{id:"答案-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-3"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("h4",{attrs:{id:"react-17-的-lanes-模型和-concurrent-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-17-的-lanes-模型和-concurrent-mode"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 17 的 lanes 模型和 Concurrent Mode")])]),t._v(" "),a("ul",[a("li",[t._v("React 17 的 lanes 模型和 Concurrent Mode 都是为了更好地支持 React Suspense。")]),t._v(" "),a("li",[t._v("它们可以一起更好地处理复杂的异步更新和任务调度。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"在-react-16-中的局限性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-react-16-中的局限性"}},[t._v("#")]),t._v(" "),a("strong",[t._v("在 React 16 中的局限性")])]),t._v(" "),a("ul",[a("li",[t._v("即使启用了 Concurrent Mode 的情况下，Suspense 在某些情况下表现得不够理想。")]),t._v(" "),a("li",[t._v("当多个 Suspense 组件同时进行数据加载时，它们可能会阻塞彼此，甚至阻塞整个应用，直到所有的数据都加载完成。")]),t._v(" "),a("li",[t._v("这种情况可能会导致不必要的渲染延迟和用户体验下降。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"react-17-中的改进"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-17-中的改进"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 17 中的改进")])]),t._v(" "),a("ul",[a("li",[t._v("React 17 引入了 lanes 模型：\n"),a("ul",[a("li",[t._v("React 可以智能地处理并调度各种不同的更新。")]),t._v(" "),a("li",[t._v("Suspense 组件的加载和渲染可以被分配到不同的 lane 上。")]),t._v(" "),a("li",[t._v("这样可以让 React 更好地管理和调度任务。")])])]),t._v(" "),a("li",[t._v("对于那些被 Suspense 捕获的异步更新，React 可以暂时将它们推迟，优先处理其他更重要或优先级更高的更新。")]),t._v(" "),a("li",[t._v("这可以提升应用的响应速度和性能。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"总结-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-6"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[t._v("Lanes 模型是 React 17 的重要改进之一，它解决了 Suspense 和异步更新在复杂场景中的调度问题，为应用提供了更高效的任务管理能力。")]),t._v(" "),a("h2",{attrs:{id:"react-fiernode链表伪代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-fiernode链表伪代码"}},[t._v("#")]),t._v(" React  FierNode链表伪代码")]),t._v(" "),a("ul",[a("li",[t._v("，在编程和数据结构中，链表是一种基碰的数据结构类型。它由一系列的节点组成，每个节点包含数据和执行下一个节点的引用。以下是一个简单的链表节点的 JavsScnpt 实现:")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Listiode")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("在这个 "),a("strong",[t._v("listNode")]),t._v(" 类中， data 属性用于存储节点的数据, "),a("strong",[t._v("next")]),t._v(" 属性用于存储对下一个节点的引用。当 next 为 ho11 时，表示这是链表的末尾。")])]),t._v(" "),a("li",[a("p",[t._v("在 React 的 "),a("strong",[t._v("Fiber")]),t._v(" 架构中，"),a("strong",[t._v("Fiber")]),t._v(" 节点就形成了一种类似链表的数据结构。每个 "),a("strong",[t._v("Fiber")]),t._v(" 节点都有一个 chi1d 属性和一个 "),a("strong",[t._v("sibling")]),t._v(" 属性，它们分别用于引用该节点的第一个子节点和下一个兄弟节点。以下是一个简化的示意代码:")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Listiode")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("next "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sibling "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("return "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父节点")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("在这个 "),a("strong",[t._v("FiberNode")]),t._v(" 类中， "),a("strong",[t._v("component")]),t._v(" 属性用于存储节点的组件数据，"),a("strong",[t._v("child")]),t._v(" 属性用于存储对第一个子节点的引用， "),a("strong",[t._v("sibling")]),t._v(" 属性用于存储对下一个兄弟节点的引用。return 属性则是对父节点的引用。通过这种方式，React构建了一个 Fiber 树，其中的每个节点都可以通过链表的方式访问其子节点和兄弟节点。这种数据结构使得 React 能够有效地遍历和渲染组件树。")]),t._v(" "),a("h2",{attrs:{id:"react-scheduler-涉及到核心微任务-宏任务代码输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-scheduler-涉及到核心微任务-宏任务代码输出"}},[t._v("#")]),t._v(" React Scheduler 涉及到核心微任务，宏任务代码输出")]),t._v(" "),a("h2",{attrs:{id:"react-dom-diff-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-dom-diff-原理"}},[t._v("#")]),t._v(" React Dom Diff 原理？")]),t._v(" "),a("h3",{attrs:{id:"答案-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-4"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("p",[t._v("React DOM Diff 可以分为以下 4 种情况：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("key 相同，type 相同")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("复用当前节点。")]),t._v(" "),a("li",[t._v("示例："),a("code",[t._v("A1 B2 C3 -> A1")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("key 相同，type 不同")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("不存在任何复用的可能性。")]),t._v(" "),a("li",[t._v("示例："),a("code",[t._v("A1 B2 C3 -> B1")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("key 不同，type 相同")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("当前节点不能复用。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("key 不同，type 不同")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("当前节点不能复用。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"算法核心步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#算法核心步骤"}},[t._v("#")]),t._v(" "),a("strong",[t._v("算法核心步骤")])]),t._v(" "),a("p",[t._v("React Diff 的核心流程包含以下步骤：")]),t._v(" "),a("ol",[a("li",[t._v("将 "),a("code",[t._v("current")]),t._v(" 阶段所有的 "),a("code",[t._v("fiber")]),t._v(" 保存到 Map 中。")]),t._v(" "),a("li",[t._v("遍历 "),a("code",[t._v("newChild")]),t._v(" 列表，对于每个遍历到的 "),a("code",[t._v("element")]),t._v("，存在两种情况：\n"),a("ul",[a("li",[a("strong",[t._v("Map 中存在对应的 "),a("code",[t._v("current fiber")])]),t._v("：可以复用。")]),t._v(" "),a("li",[a("strong",[t._v("Map 中不存在对应的 "),a("code",[t._v("current fiber")])]),t._v("：不能复用。")])])]),t._v(" "),a("li",[t._v("处理新增节点。")]),t._v(" "),a("li",[t._v("Map 中剩余未匹配的节点将被删除。")])]),t._v(" "),a("h2",{attrs:{id:"react-的同构开发你是如何部署的-使用-next-js-还是自己开发好-流式渲染是什么有什么好处"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-的同构开发你是如何部署的-使用-next-js-还是自己开发好-流式渲染是什么有什么好处"}},[t._v("#")]),t._v(" React 的同构开发你是如何部署的？使用 Next.js 还是自己开发好？流式渲染是什么有什么好处？")]),t._v(" "),a("h3",{attrs:{id:"答案-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-5"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("p",[t._v("React 的同构开发（Isomorphic JavaScript）是一种将 React 代码能够在服务端执行并生成 HTML，然后在浏览器端接管渲染并进一步交互的开发方式。"),a("br"),t._v("\n这样的优点包括：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("提升首屏渲染速度")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("加强用户体验，特别是在网络较慢或设备性能有限的情况下。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("对搜索引擎优化（SEO）有利")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("因为搜索引擎可以直接解析服务端返回的 HTML 内容，而无需额外执行 JavaScript。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"关于部署方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于部署方式"}},[t._v("#")]),t._v(" "),a("strong",[t._v("关于部署方式")])]),t._v(" "),a("p",[t._v("常见的部署方式有以下两种：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("使用 Next.js")])]),t._v(" "),a("ul",[a("li",[t._v("Next.js 是一个流行的、基于 React 的同构 JavaScript 框架。")]),t._v(" "),a("li",[t._v("它能处理常见的开发问题，包括路由器、数据预取和预渲染等。")]),t._v(" "),a("li",[t._v("使用 Next.js 通常可以节省大量开发时间，并提供了一个成熟稳定的平台。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("自己开发")])]),t._v(" "),a("ul",[a("li",[t._v("这种方式使用 Node.js 服务端框架（如 Express）来构建 React 应用。")]),t._v(" "),a("li",[t._v("服务端发送生成的 HTML 到浏览器。")]),t._v(" "),a("li",[t._v("这种方式需要解决较多细节问题，例如代码分割、数据预取和路由配置。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"云平台的选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云平台的选择"}},[t._v("#")]),t._v(" "),a("strong",[t._v("云平台的选择")])]),t._v(" "),a("p",[t._v("可以参考以下云平台来部署：")]),t._v(" "),a("ul",[a("li",[t._v("AWS")]),t._v(" "),a("li",[t._v("Cloudflare")])]),t._v(" "),a("p",[t._v("在部署同构应用时，常见实践是结合反向代理（如 Nginx），将特定请求转发到 Node.js 服务端完成渲染。")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"关于流式渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于流式渲染"}},[t._v("#")]),t._v(" "),a("strong",[t._v("关于流式渲染")])]),t._v(" "),a("ul",[a("li",[t._v("流式渲染（streaming）是一种按需发送数据的模式。")]),t._v(" "),a("li",[t._v("不等待完整内容生成后一次性发送，而是逐步将生成的内容发送给用户。")]),t._v(" "),a("li",[a("strong",[t._v("优点")]),t._v("：\n"),a("ol",[a("li",[a("strong",[t._v("提高渲染速度")]),t._v("：用户可以更早地看到部分渲染的页面。")]),t._v(" "),a("li",[a("strong",[t._v("节省服务器内存")]),t._v("：因为无需将完整的 HTML 存在内存中，可以直接将内容流式发送给用户。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"总结-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-7"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[t._v("如果你需要快速开发，推荐使用 Next.js；如果需要完全自定义和掌控，自己开发也是可行的选择。\n流式渲染可以显著提升用户体验，是优化大型应用性能的重要技术。")]),t._v(" "),a("p",[t._v("bigpip")]),t._v(" "),a("h2",{attrs:{id:"react-服务端渲染需要进行-hydrate-吗-哪些版本不需要-我听说-qwik-是懒加载的-为什么呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-服务端渲染需要进行-hydrate-吗-哪些版本不需要-我听说-qwik-是懒加载的-为什么呢"}},[t._v("#")]),t._v(" React 服务端渲染需要进行 Hydrate 吗？哪些版本不需要？我听说 Qwik 是懒加载的，为什么呢？")]),t._v(" "),a("h3",{attrs:{id:"答案-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-6"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("h4",{attrs:{id:"react-的-hydrate-概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-的-hydrate-概念"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 的 Hydrate 概念")])]),t._v(" "),a("ul",[a("li",[t._v("在 React 服务端渲染（Server Side Rendering, SSR）中，"),a("code",[t._v("hydrate")]),t._v(" 是一个重要的步骤。")]),t._v(" "),a("li",[t._v("React 会生成 HTML 字符串，然后在浏览器端，React 需要接管这些已经渲染好的 HTML，使其可以交互。")]),t._v(" "),a("li",[t._v("这个过程称为 "),a("code",[t._v("hydration")]),t._v("。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"从-react-16-开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-react-16-开始"}},[t._v("#")]),t._v(" "),a("strong",[t._v("从 React 16 开始")])]),t._v(" "),a("ul",[a("li",[t._v("React 引入了 "),a("code",[t._v("ReactDOM.hydrate")]),t._v(" 来替代 "),a("code",[t._v("ReactDOM.render")]),t._v(" 进行 "),a("code",[t._v("hydration")]),t._v("。")]),t._v(" "),a("li",[t._v("如果你在服务端渲染了某些内容，然后想在客户端接管这个根上，你需要使用 "),a("code",[t._v("ReactDOM.hydrate")]),t._v(" 而不是 "),a("code",[t._v("ReactDOM.render")]),t._v("。")])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"react-18-的改进"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-18-的改进"}},[t._v("#")]),t._v(" "),a("strong",[t._v("React 18 的改进")])]),t._v(" "),a("ul",[a("li",[t._v("React 18 开始计划引入部分懒加载的 "),a("code",[t._v("hydration")]),t._v("。")]),t._v(" "),a("li",[a("strong",[t._v("部分 "),a("code",[t._v("hydration")]),t._v(" 的主要思想")]),t._v("：\n"),a("ul",[a("li",[t._v("React 应用在初始渲染时并不立即 "),a("code",[t._v("hydrate")]),t._v(" 全部组件，而是根据用户的交互行为分阶段加载和执行。")]),t._v(" "),a("li",[t._v("这提升了用户体验，尤其是在页面复杂度较高时。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"关于-qwik"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于-qwik"}},[t._v("#")]),t._v(" "),a("strong",[t._v("关于 Qwik")])]),t._v(" "),a("ul",[a("li",[t._v("Qwik 是 Google 推出的一种面向性能优化的 JavaScript 框架。")]),t._v(" "),a("li",[t._v("Qwik 的设计目标是提供“即用即执行”的性能。")]),t._v(" "),a("li",[t._v("为了实现这一目标，Qwik 采用了一种称为 "),a("strong",[t._v("“HTML-oriented programming”")]),t._v(" 的方法：\n"),a("ol",[a("li",[t._v("Qwik 将组件的 HTML 作为静态内容直接发送到浏览器，并将事件处理器等 JavaScript 按需加载。")]),t._v(" "),a("li",[t._v("Qwik 能够暂停和恢复 JavaScript 的执行，而无需加载完整的前端代码。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"qwik-的优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qwik-的优点"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Qwik 的优点")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("按需加载")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("与传统框架不同，Qwik 不需要完整加载 HTML 以完成渲染，而是通过 diff 和 "),a("code",[t._v("hydration")]),t._v(" 来精确加载用户所需的部分内容。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("极快的首屏渲染")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("Qwik 可以显著减少页面的 HTML 解析和加载时间，特别是针对首字节渲染（First Contentful Paint, FCP）优化。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"总结-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-8"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("React 的 "),a("code",[t._v("hydrate")]),t._v(" 是服务端渲染的重要步骤，部分版本（如 React 18）开始尝试部分 "),a("code",[t._v("hydration")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("Qwik 的“HTML-oriented programming”方法通过按需加载显著优化了单页应用（SPA）的性能，非常适合高性能要求的场景。")])])]),t._v(" "),a("p",[t._v("面试4 ------ web相关的 可以再次回顾\n面试5 ------ web相关的 可以再次回顾")]),t._v(" "),a("h2",{attrs:{id:"react-同构渲染如何提高性能问题-都有哪些关键指标-同构解决了哪些性能指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-同构渲染如何提高性能问题-都有哪些关键指标-同构解决了哪些性能指标"}},[t._v("#")]),t._v(" React 同构渲染如何提高性能问题？都有哪些关键指标？同构解决了哪些性能指标？")]),t._v(" "),a("h3",{attrs:{id:"答案-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-7"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("p",[t._v("React 同构渲染，也称为服务端渲染（SSR），在某些情况下可以极大地提高性能，并改善用户体验。以下是其可能的性能优势：")]),t._v(" "),a("h4",{attrs:{id:"_1-提升首屏加载速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-提升首屏加载速度"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. 提升首屏加载速度")])]),t._v(" "),a("ul",[a("li",[t._v("SSR 会将 React 应用的初始状态渲染为 HTML，然后发送到客户端。")]),t._v(" "),a("li",[t._v("这样浏览器可以更早地开始显示页面内容，而不用等待所有的 JavaScript 代码下载、解析和执行。")])]),t._v(" "),a("h4",{attrs:{id:"_2-对-seo-友好"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-对-seo-友好"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. 对 SEO 友好")])]),t._v(" "),a("ul",[a("li",[t._v("搜索引擎更容易抓取和解析服务端返回的 HTML，而不是客户端渲染的 JavaScript。")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"关键性能指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键性能指标"}},[t._v("#")]),t._v(" "),a("strong",[t._v("关键性能指标")])]),t._v(" "),a("p",[t._v("一般可以从以下指标评估加载性能如何影响用户体验：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("FCP (First Contentful Paint)")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("首次内容绘制，SSR 可以减少 FCP 的时间，因为用户可以在收到服务器返回的 HTML 后立即开始渲染页面。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("FMP (First Meaningful Paint)")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("首次有意义绘制，SSR 也可以减少 FMP 的时间，因为服务器渲染的页面通常包含了页面的主要内容。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("LCP (Largest Contentful Paint)")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("最大内容绘制，LCP 测量页面的主要内容（通常是标题或主要图片）从用户视角可见的时间。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("FID (First Input Delay)")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("首次输入延迟，FID 测量从用户交互（例如点击按钮）到浏览器开始处理交互之间的时间。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("CLS (Cumulative Layout Shift)")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("累积布局偏移，CLS 测量由于内容重新布局而造成的页面视觉稳定性问题。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"如何优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何优化"}},[t._v("#")]),t._v(" "),a("strong",[t._v("如何优化")])]),t._v(" "),a("p",[t._v("为了进一步提升性能，可以在部署中结合以下技术：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("数据预取")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("使用适当的数据加载方法（如 "),a("code",[t._v("loadData")]),t._v(" 方法），或者使用 Next.js 提供的解决方案。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("客户端优化")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("服务器渲染后应尽可能减少额外的重新渲染工作，例如避免多次调用 "),a("code",[t._v("componentDidMount")]),t._v(" 和 "),a("code",[t._v("componentDidUpdate")]),t._v("。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("服务器优化")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("提高服务器的计算性能（CPU 和内存管理），并通过代码拆分和缓存来降低负载。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"总结-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结-9"}},[t._v("#")]),t._v(" "),a("strong",[t._v("总结")])]),t._v(" "),a("p",[t._v("React 的 SSR 不仅能优化 Web 的核心性能指标，还能提高用户体验。如果需要快速实现这些功能，可以使用 Next.js，它为 React SSR 提供了极大的便利。")]),t._v(" "),a("h2",{attrs:{id:"各个平台进行-javascript-冷启动的区别是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#各个平台进行-javascript-冷启动的区别是什么"}},[t._v("#")]),t._v(" 各个平台进行 JavaScript 冷启动的区别是什么？")]),t._v(" "),a("h3",{attrs:{id:"答案-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-8"}},[t._v("#")]),t._v(" "),a("strong",[t._v("答案")])]),t._v(" "),a("h4",{attrs:{id:"_1-cloudflare-workers-与-aws-lambda-的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cloudflare-workers-与-aws-lambda-的对比"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1. Cloudflare Workers 与 AWS Lambda 的对比")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Cloudflare Workers")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("基于 Google V8 Isolate 引擎的轻量级隔离环境。")]),t._v(" "),a("li",[t._v("每个请求都会在一个新的 Isolate 中执行，每个 Isolate 都拥有自己的高密度隔离和数据传输。")]),t._v(" "),a("li",[t._v("创建和销毁的开销非常低，这使得 Cloudflare Workers 在冷启动时间方面表现极为优异。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("AWS Lambda")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("使用不同的隔离方式，比 Cloudflare Workers 更为重量级。")]),t._v(" "),a("li",[t._v("每当 Lambda 函数冷启动时，需要加载和初始化运行环境，启动时间通常更长。")]),t._v(" "),a("li",[t._v("频繁使用的函数通常会有较好的性能，因为热启动减少了初始化时间。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"_2-javascript-函数冷启动分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-javascript-函数冷启动分析"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2. JavaScript 函数冷启动分析")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("AWS Lambda 使用 Node.js 环境")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("在该环境中，函数首次被调用时需要初始化，这个过程会花费一定时间。")]),t._v(" "),a("li",[t._v("冷启动需要计算资源加载函数代码、依赖项及其初始化状态。")]),t._v(" "),a("li",[t._v("对于大型函数或复杂依赖项，冷启动时间可能会更长。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Cloudflare Workers")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("由于基于 V8 Isolate，启动开销非常小。")]),t._v(" "),a("li",[t._v("可以快速完成环境加载和代码执行。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h4",{attrs:{id:"_3-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-总结"}},[t._v("#")]),t._v(" "),a("strong",[t._v("3. 总结")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Cloudflare Workers")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("适合需要快速响应的小型任务，冷启动时间极短。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("AWS Lambda")]),t._v(":")]),t._v(" "),a("ul",[a("li",[t._v("适合更复杂的场景，提供更大的灵活性，但冷启动时间较长。")])])])]),t._v(" "),a("p",[t._v("两者各有优势，具体选择取决于应用场景和对性能的需求。")]),t._v(" "),a("h2",{attrs:{id:"同构注水与脱水是什么意思-react-进行-serverless-部署时项目实现效果是否变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同构注水与脱水是什么意思-react-进行-serverless-部署时项目实现效果是否变化"}},[t._v("#")]),t._v(" 同构注水与脱水是什么意思？React 进行 Serverless 部署时项目实现效果是否变化？")]),t._v(" "),a("h3",{attrs:{id:"答案-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-9"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("p",[t._v("React 项目渲染涉及到“注水”和“脱水”的概念。这两个术语来源于 React 服务端渲染（SSR）的两个重要步骤：")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("脱水 (Dehydration)")]),t._v("：\n在服务端渲染时，React 将组件渲染为 HTML 字符串，并生成与应用状态相关的快照（即“脱水”数据）。然后，服务端将渲染后的 HTML 和快照数据一起发送到客户端。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("注水 (Rehydration)")]),t._v("：\n在客户端，React 使用服务端发送过来的快照数据恢复应用的状态，这个过程被称为“注水”。然后 React 会将服务端渲染的 HTML 和客户端组件树进行匹配。如果匹配成功，React 将管理已经存在的 DOM 组件，而无需重新渲染。")])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("这种同构渲染方式有以下好处：")]),t._v(" "),a("ul",[a("li",[t._v("首先，用户可以更快速地看到页面内容，因为浏览器可以直接渲染已经生成好的 HTML。")]),t._v(" "),a("li",[t._v("其次，由于服务端渲染生成的内容，客户端能更快地完成渲染。")]),t._v(" "),a("li",[t._v("最后，React 的“注水”机制允许接管已有的 DOM，避免了额外的 DOM 操作，从而提高了性能。")])]),t._v(" "),a("p",[t._v("但需要注意，这种方式在一些场景下可能会遇到问题，例如服务端和客户端可能会出现一些误差，如数据不一致导致错误的状态。")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("具体的 Next.js 部署请参考官方文档："),a("a",{attrs:{href:"https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);